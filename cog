#!/usr/bin/env node
'use strict';

// Repo-local dev wrapper for the Node runtime.
//
// This repository intentionally presents an npm-only surface area.
// If you are looking for the legacy Python runtime, see `experimental/python/`.

const cp = require('node:child_process');
const fs = require('node:fs');
const path = require('node:path');

const cliPath = path.join(__dirname, 'packages', 'cli-node', 'dist', 'cli.js');

if (!fs.existsSync(cliPath)) {
  console.error('[cog] Local CLI is not built.');
  console.error('[cog] Run: npm -C packages/cli-node ci && npm -C packages/cli-node run build');
  process.exit(1);
}

const args = process.argv.slice(2);
const res = cp.spawnSync(process.execPath, [cliPath, ...args], { stdio: 'inherit' });
process.exit(res.status ?? 1);

